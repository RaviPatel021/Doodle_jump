// SpaceInvaders.c
// Runs on TM4C123
// Jonathan Valvano and Daniel Valvano
// This is a starter project for the EE319K Lab 10

// Last Modified: 1/12/2022 
// http://www.spaceinvaders.de/
// sounds at http://www.classicgaming.cc/classics/spaceinvaders/sounds.php
// http://www.classicgaming.cc/classics/spaceinvaders/playguide.php

// ******* Possible Hardware I/O connections*******************
// Slide pot pin 1 connected to ground
// Slide pot pin 2 connected to PD2/AIN5
// Slide pot pin 3 connected to +3.3V 
// buttons connected to PE0-PE3
// 32*R resistor DAC bit 0 on PB0 (least significant bit)
// 16*R resistor DAC bit 1 on PB1
// 8*R resistor DAC bit 2 on PB2 
// 4*R resistor DAC bit 3 on PB3
// 2*R resistor DAC bit 4 on PB4
// 1*R resistor DAC bit 5 on PB5 (most significant bit)
// LED on PD1
// LED on PD0


#include <stdint.h>
#include "../inc/tm4c123gh6pm.h"
#include "ST7735.h"
#include "Print.h"
#include "Random.h"
#include "TExaS.h"
#include "ADC.h"
#include "Images.h"
#include "Sound.h"
#include "Timer1.h"
#include "PLL.h"
#include "random.h"

void DisableInterrupts(void); // Disable interrupts
void EnableInterrupts(void);  // Enable interrupts
void Delay100ms(uint32_t count); // time delay in 0.1 seconds



typedef enum {English, Spanish, Portuguese, French} Language_t;
Language_t myLanguage=English;
typedef enum {HELLO, GOODBYE, LANGUAGE} phrase_t;
const char Hello_English[] ="Hello";
const char Hello_Spanish[] ="\xADHola!";
const char Hello_Portuguese[] = "Ol\xA0";
const char Hello_French[] ="All\x83";
const char Goodbye_English[]="Goodbye";
const char Goodbye_Spanish[]="Adi\xA2s";
const char Goodbye_Portuguese[] = "Tchau";
const char Goodbye_French[] = "Au revoir";
const char Language_English[]="English";
const char Language_Spanish[]="Espa\xA4ol";
const char Language_Portuguese[]="Portugu\x88s";
const char Language_French[]="Fran\x87" "ais";
const char *Phrases[3][4]={
  {Hello_English,Hello_Spanish,Hello_Portuguese,Hello_French},
  {Goodbye_English,Goodbye_Spanish,Goodbye_Portuguese,Goodbye_French},
  {Language_English,Language_Spanish,Language_Portuguese,Language_French}
};


void EdgeCounter_Init(void){                          
  SYSCTL_RCGCGPIO_R |= 0x00000020; // (a) activate clock for port F
  GPIO_PORTF_DIR_R &= ~0x10;    // (c) make PF4 in (built-in button)
  GPIO_PORTF_AFSEL_R &= ~0x10;  //     disable alt funct on PF4
  GPIO_PORTF_DEN_R |= 0x10;     //     enable digital I/O on PF4   
  GPIO_PORTF_PCTL_R &= ~0x000F0000; // configure PF4 as GPIO
  GPIO_PORTF_AMSEL_R = 0;       //     disable analog functionality on PF
  GPIO_PORTF_PUR_R |= 0x10;     //     enable weak pull-up on PF4
//  GPIO_PORTF_IS_R &= ~0x10;     // (d) PF4 is edge-sensitive
  GPIO_PORTF_IBE_R &= ~0x10;    //     PF4 is not both edges
//  GPIO_PORTF_IEV_R &= ~0x10;    //     PF4 falling edge event
  GPIO_PORTF_ICR_R = 0x10;      // (e) clear flag4
  GPIO_PORTF_IM_R |= 0x10;      // (f) arm interrupt on PF4 *** No IME bit as mentioned in Book ***
  NVIC_PRI7_R = (NVIC_PRI7_R&0xFF00FFFF)|0x00A00000; // (g) priority 5
  NVIC_EN0_R = 0x40000000;      // (h) enable interrupt 30 in NVIC
  EnableInterrupts();           // (i) Clears the I bit
}

int stop=0;
int gameend=0;
int times=0;
int explosioncounter=20;
int explosionflag=0;
uint32_t data;
int right=1;
int score=0;
int moveheight=0;
int upface=0;
int loop=2;
int clear=0;
int springcount =10;
int compressed=1;
int comflag =0;
int jumpcount=0;
const unsigned short jump2[] = {
 0xDED9, 0xB4CE, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xB50F, 0xD636, 0xB50F, 0xBD30, 0xBD30, 0xB50F, 0xBD30, 0xBD30, 0xBD30,
 0xBD30, 0xBD30, 0xBD30, 0xB4EF, 0xDE77, 0xB50F, 0xBD30, 0xBD30, 0xBD30, 0xB4EE, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30,
 0xBD30, 0xB50F, 0xBD30, 0xBD30, 0xB50F, 0xD656, 0xBD2F, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xB4EF, 0xBD30, 0xBD30,
 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xB50F, 0xD615, 0xB4EF,
 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xB50F, 0xBD30, 0xBD30,
 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD50, 0xB50F, 0xBD50, 0xBD30, 0xBD50, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30,
 0xB50F, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xB50F, 0xD636, 0xB4CE, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xCD91, 0xBD50, 0x940E,
 0xCD91, 0x734C, 0xBD50, 0x734C, 0xC550, 0xBD30, 0xBD30, 0xB50F, 0xAC8D, 0xDEB8, 0xB4EE, 0xBD30, 0xBD30, 0xBD30, 0xB50F, 0xD635,
 0xC5B3, 0xB50F, 0xBD30, 0xBD30, 0xBD30, 0xC550, 0x5AAB, 0xBD50, 0xA4AF, 0x944F, 0xACD0, 0xBD30, 0x8C0E, 0xC570, 0xBD30, 0xB50F,
 0xC592, 0xE6FA, 0xF77D, 0xDE97, 0xB4EF, 0xBD30, 0xBD30, 0xBD30, 0xB50F, 0xB50F, 0xB50F, 0xBD30, 0xBD30, 0xBD30, 0xC550, 0x8C0F,
 0x9C2C, 0xA449, 0x9C2A, 0x83A9, 0xAC8B, 0x83AA, 0xACAE, 0xBD30, 0xBD51, 0xB50F, 0xBD30, 0xCDD4, 0xACAE, 0xBD30, 0xBD30, 0xBD30,
 0xBD30, 0xBD30, 0xBD71, 0xC592, 0xBD10, 0xBD30, 0xBD30, 0x9C70, 0xB420, 0xA400, 0x3A36, 0x7326, 0x9407, 0x93C7, 0x9C26, 0x51A3,
 0xC591, 0xBD51, 0xBD51, 0xBD30, 0xBD50, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD10, 0xB50F, 0xBD30, 0xBD30, 0xBD2F,
 0x7B8C, 0x7327, 0x9C05, 0x9C07, 0xB441, 0x9BE4, 0x93E6, 0x93E9, 0x4183, 0xA4AF, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30,
 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xB4EF, 0xE6F9, 0x940E, 0xBCC8, 0xACCE, 0x7B49, 0xACD0, 0xACCF, 0x93C9,
 0xACA9, 0x9BE6, 0xC571, 0xBD30, 0xBD30, 0xBD30, 0xB530, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD50, 0xCD70,
 0xC52F, 0xD5D1, 0x72CB, 0x7CD4, 0x74F4, 0x5473, 0x64F4, 0x64D3, 0x53D1, 0x6C31, 0x8C32, 0x942E, 0xBD50, 0xBD30, 0xBD30, 0xD656,
 0xB50F, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xA42D, 0x3432, 0x5451, 0x532C, 0x4D56, 0x4FFF, 0x4F7E, 0x4F7E, 0x4F7E,
 0x4F7E, 0x4FBF, 0x47BF, 0x04B6, 0xA3ED, 0xBD50, 0xBD30, 0xBD30, 0xB50F, 0xBD30, 0xBD10, 0xBD30, 0xBD51, 0xBD30, 0xBD30, 0xC550,
 0x6471, 0x45D8, 0x4FFF, 0x4FFF, 0x577E, 0x575E, 0x575D, 0x577E, 0x571D, 0x571D, 0x4F1D, 0x575D, 0x1578, 0xAC2F, 0xBD50, 0xBD30,
 0xBD30, 0xBD30, 0xBD10, 0xC592, 0xB50F, 0xD636, 0xB50F, 0xBD30, 0xBD30, 0x8C6F, 0x6B8D, 0x836C, 0x43B0, 0x3F5E, 0x4D35, 0x4E19,
 0x4C52, 0x575E, 0x573D, 0x573D, 0x573D, 0x367B, 0xC4D0, 0x944E, 0xBD30, 0xBD30, 0xBD30, 0xB50F, 0xC5D3, 0xB50F, 0xB50F, 0xBD30,
 0xBD30, 0xBD30, 0xBD2F, 0xD614, 0xCD70, 0x9C2E, 0xB490, 0x47BF, 0x4F5D, 0x4F5D, 0x573D, 0x573D, 0x573D, 0x575E, 0x3D36, 0xCD52,
 0xA48E, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xB50F, 0xBD30, 0xBD30, 0xBD30, 0xB4EF, 0xBD30, 0xBD30, 0xB50F, 0xBD50, 0x732B, 0xFEF8,
 0x7E39, 0x475E, 0x571D, 0x4F1D, 0x571D, 0x573D, 0x3FBF, 0xAC6F, 0x7BAE, 0xCD90, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30,
 0xBD30, 0xB50F, 0xD656, 0xB4EF, 0xBD30, 0xBD30, 0xBD30, 0xC590, 0x62EC, 0xFED8, 0x4598, 0x3FBF, 0x4FBF, 0x47DF, 0x2E7B, 0x840F,
 0xC572, 0x8BED, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xAC8D, 0xEF1B, 0xAC6C, 0xB50F, 0xBD30, 0xBD30,
 0xBD30, 0xB50F, 0x62CB, 0xF6D7, 0xB44E, 0x8471, 0x9470, 0xE591, 0xACD2, 0x734C, 0xACCF, 0xCD90, 0xC570, 0xBD30, 0xBD30, 0xB50F,
 0xB50F, 0xBD30, 0xB4EE, 0xE6F9, 0xFFFF, 0xEF5C, 0xC5B3, 0xB50F, 0xBD30, 0xBD30, 0xC550, 0xD5F1, 0x62EB, 0x83CE, 0x8BEE, 0x8BCE,
 0x6B0B, 0xD636, 0xBD2F, 0xBD30, 0x6B0D, 0x7B6C, 0xC550, 0xB50F, 0xEF3B, 0xC592, 0xB50F, 0xBD30, 0xACAD, 0xF77C, 0xA44B, 0xB50F,
 0xBD30, 0xBD30, 0xBD50, 0x8C0E, 0x5AAB, 0xCDB1, 0xC550, 0xC570, 0xC550, 0xC550, 0xB50F, 0xBD10, 0xBD30, 0xA4AF, 0xA48F, 0xBD50,
 0xB50F, 0xBD30, 0xB4EF, 0xBD30, 0xBD30, 0xB50F, 0xC5B3, 0xB50F, 0xBD30, 0xBD30, 0xBD30, 0xB50F, 0xBD30, 0x9C6F, 0xBD50, 0xBD30,
 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xC572, 0xBD30, 0xBD30, 0xBD50, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xB50F,
 0xBD10, 0xBD30, 0xBD30, 0xB4EF, 0xD656, 0xB50F, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xACCE, 0xD635, 0xC572, 0xB4CE,
 0xBD30, 0xBD30, 0xBD30, 0xB50F, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD50, 0xC5B3, 0xB50F, 0xBD30, 0xBD30, 0xB50F, 0xBD30, 0xBD30,
 0xB510, 0xB50F, 0xBD30, 0xBD30, 0xB4EF, 0xDEB8, 0xF79D, 0xF79D, 0xE71A, 0xB4EE, 0xBD30, 0xB4EF, 0xDE98, 0xB50F, 0xBD30, 0xBD30,
 0xBD30, 0xBD51, 0xCDF4, 0xB50F, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xB50F, 0xCDD3, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xB4CE, 0xCDD3,
 0xCDD4, 0xACCE, 0xBD30, 0xBD30, 0xBD30, 0xB4EE, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xB50F, 0xBD30, 0xBD30, 0xBD30, 0xBD30,
 0xBD30, 0xBD30, 0xB50F, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD51, 0xC592, 0xBD10, 0xBD30, 0xBD30, 0xBD30, 0xBD30, 0xBD30,
 0xBD30,
};

const unsigned short compress[] = {
 0xAD75, 0x6B4D, 0x31C6, 0x2965, 0x2144, 0xF7BE, 0x31A6, 0x39E7, 0x9492, 0xA534, 0x9CF3, 0x3A07, 0x4228, 0x6B8E, 0xB5B6, 0xA514,
 0x5B0C, 0x9CF3, 0xA514, 0x6B6D, 0x52CA, 0x632C, 0x8430, 0xFFFF,
};
const unsigned short expand[] = {
 0xE71C, 0x8430, 0x94B2, 0x94B2, 0x94B2, 0xFFFF, 0x632C, 0xFFFF, 0xEF7D, 0xBDF7, 0xBDF7, 0xFFFF, 0xC618, 0x1903, 0x4228, 0x8451,
 0x7C0F, 0x39E7, 0xDEDB, 0xC638, 0xFFDF, 0xA534, 0xA514, 0xFFFF, 0xFFFF, 0x31C6, 0x4A69, 0xC658, 0xC638, 0x2124, 0xFFFF, 0x73AE,
 0xFFFF, 0xCE59, 0xD69A, 0xFFFF, 0xFFFF, 0xA514, 0x8C71, 0x94B2, 0x94B2, 0x8C92,
};

const unsigned short shot[] = {
 0xFFFF, 0x8CB3, 0x9CD3, 0xF7DF, 0x4229, 0x6B8F, 0x528B, 0x634D, 0x3185, 0x62BD, 0x6B74, 0x5ACB, 0xB5D7, 0x52C9, 0x9492, 0xEF9F,

};

const unsigned short doodleright[] = {
 0xFFFF, 0xF7BE, 0x8C51, 0xB5B6, 0xB596, 0x8430, 0xFFFF, 0xB576, 0xDEFB, 0xEF7D, 0xE73C, 0xFFDF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xAD55, 0x4A69, 0xFFFF, 0x41E8, 0xD67A, 0xE71C, 0x3186, 0xFFDF, 0x3186, 0x6B6D, 0xB596, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x6B2D, 0xFFFF, 0x9CD3, 0xC638, 0xFFFF, 0x6B2D, 0xF77E, 0x4A29, 0xCE79, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xEF7D, 0x1924, 0x21C6, 0x2185, 0x1945, 0x10E3, 0x1924, 0x1985, 0x1164, 0x21C6,
 0x08E2, 0xB576, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xEF3C, 0x08E3, 0x2207, 0x21C6, 0x21C6, 0x21C6, 0x21A6, 0x21C6,
 0x21A6, 0x21A6, 0x1124, 0xA4F4, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xB5B6, 0x1144, 0x2AC9, 0x2AE9, 0x2AC9, 0x2A88,
 0x2A68, 0x2A27, 0x21E7, 0x21A6, 0x1103, 0x9CD3, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xAD55, 0x1A06, 0x2AC9, 0x2A88,
 0x2AA8, 0x2AA9, 0x2AC9, 0x2AE9, 0x332A, 0x33AB, 0x2B4A, 0x9C92, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xAD55, 0x1964,
 0x2A68, 0x2A27, 0x29A5, 0x2185, 0x2144, 0x20E3, 0x2145, 0x21C7, 0x1082, 0x738E, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFDF, 0xFFFF,
 0xB555, 0x138E, 0x2CF4, 0x2CF4, 0x2D76, 0x2DB7, 0x2E59, 0x36DB, 0x36BB, 0x36BB, 0x2EFC, 0x29E7, 0xFF7D, 0xFFFF, 0xFFFF, 0xC5F8,
 0x0000, 0xE71C, 0xAD14, 0x1C51, 0x369A, 0x2E59, 0x2E59, 0x2E59, 0x2E39, 0x2E39, 0x2E39, 0x2E39, 0x2E59, 0x2DD7, 0x128A, 0x326A,
 0x1AAA, 0x1229, 0x1B2D, 0x9CB2, 0xB575, 0x134D, 0x2E7A, 0x2E39, 0x2E39, 0x2E39, 0x2E39, 0x2E39, 0x2E7A, 0x2E59, 0x2E59, 0x2E59,
 0x2EFC, 0x26BB, 0x269B, 0x1ACB, 0x26BB, 0x62CB, 0xDEBA, 0x1229, 0x369A, 0x2E39, 0x2E39, 0x2E39, 0x2E39, 0x2E39, 0x2C31, 0x2D76,
 0x2CD3, 0x2DF8, 0x1A28, 0x52AB, 0x736E, 0x4A28, 0x0082, 0xB596, 0xEF1C, 0x12AB, 0x2E9A, 0x2E39, 0x2E39, 0x2E39, 0x2E39, 0x2E59,
 0x22CB, 0x2DF8, 0x24F4, 0x39C7, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFBE, 0xFFFF, 0xE6BA, 0x134D, 0x2E9A, 0x2E39, 0x2E39, 0x2E39,
 0x2E39, 0x2E39, 0x2E7A, 0x2E9A, 0x138E, 0xC5D7, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x2924, 0x2E59, 0x2E5A,
 0x2E39, 0x2E39, 0x2E39, 0x2E39, 0x2E59, 0x2639, 0x4228, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xCE39,
 0x0082, 0x2DD7, 0x36BB, 0x2E7A, 0x2E59, 0x2E9A, 0x2E9A, 0x1986, 0xEF1C, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xBD96, 0x1020, 0x12CB, 0x24B3, 0x2535, 0x132D, 0x2966, 0xE6DB, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xAD34, 0x7B6D, 0x7B6E, 0xB555, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
};

const unsigned short doodleshot[] = {
 0xFFFF, 0xFFFF, 0xFFFF, 0xEFBF, 0xC659, 0x8431, 0xFFFF, 0x52AB, 0xF7FF, 0xF7FF, 0xC67A, 0xBDF8, 0xEFFF, 0x9D15, 0xF7BF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xD6FC, 0x8C92, 0x4229, 0xBDF7, 0x526A, 0xCE9A, 0xCE9A, 0x632D, 0x62EC, 0x8C71, 0x3186,
 0xBDF7, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x8C72, 0x39C7, 0x42CA, 0x2AA8, 0x32C9, 0x2A27, 0x2A27, 0x3AA9, 0x32E9,
 0x2AA8, 0x52EB, 0x2104, 0xEF5D, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x8410, 0x8CD2, 0x8DF6, 0x75B3, 0x75D3, 0x7634, 0x7634,
 0x7614, 0x75B4, 0x85F5, 0x95B5, 0x41C7, 0xFFDF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x6B8E, 0x3BCC, 0x33CB, 0x3BCB, 0x338B,
 0x3329, 0x3329, 0x1AE8, 0x2328, 0x3BCC, 0x3C0C, 0x29A6, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x41E8, 0x4AEA, 0x2AA9,
 0x3B0B, 0x3B6B, 0x43AC, 0x43AC, 0x3B8B, 0x332A, 0x3AC9, 0x3ACA, 0x3165, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x5B4D,
 0x3F1C, 0x3EFC, 0x1EBA, 0x1E9A, 0x26BB, 0x26BB, 0x1E9A, 0x1E9A, 0x36DB, 0x371C, 0x3BEF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0x330C, 0x269A, 0x4679, 0x7EDC, 0x2E79, 0x2E79, 0x2E79, 0x2659, 0x5EDB, 0x5EBA, 0x369A, 0x0451, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0x42CA, 0x1E9A, 0x4E9A, 0x2E79, 0x2E79, 0x46BA, 0x46BA, 0x56BB, 0x2E79, 0x5EBA, 0x1E9A, 0x2CB2, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x3A49, 0x169A, 0x1E58, 0x1639, 0x4638, 0x6618, 0x6618, 0x25B6, 0x3E79, 0x2E79, 0x0E79,
 0x1BAF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x62AB, 0x6E18, 0x1EBA, 0x1E39, 0x1D74, 0x4513, 0x4513, 0x53AF, 0x3638,
 0x1E59, 0x5F1C, 0x2925, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xAD96, 0x45B6, 0x371B, 0x169A, 0x1E7A, 0x1E7A,
 0x1E99, 0x3EBB, 0x3EFB, 0x3249, 0xA534, 0xF7BE, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x5AAC, 0x29C6, 0x2472,
 0x3EFA, 0x3EFA, 0x269A, 0x2471, 0x31C7, 0xAD75, 0xE7DF, 0xEFDF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xCE9A, 0x6269, 0x2C91, 0x2C91, 0x2DD7, 0x6269, 0xE77E, 0xF7DF, 0xFFFF, 0xFFDF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xF7DF, 0xEF5E, 0x426A, 0x426A, 0x2D34, 0xA514, 0xEF9F, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xE71D, 0x1A28, 0x1A28, 0x3E59, 0x7B6E, 0xEF9F, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x9CB3, 0x3AAA, 0x3AAA, 0x334D, 0x3145, 0xCEDB, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x8C92, 0x4AEB, 0x4AEB, 0x2BAE, 0x3A49, 0x9D55, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
};

const unsigned short doodleleft[] = {
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFDF, 0xE73C, 0xEF5D, 0xEF5D, 0xAD55, 0xFFFF, 0x94B3, 0x9CB3, 0xDEDB, 0x73AE,
 0xE73C, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xBDF7, 0x6B6D, 0x2925, 0xFFFF, 0x4A69, 0xB5B6, 0xF79E, 0x18C3,
 0xFFFF, 0x8430, 0x6B4D, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xD6BA, 0x4A28, 0xEF3C, 0x8430, 0xDEDB,
 0xF79E, 0x6B4D, 0xFFFF, 0x9471, 0xE73C, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xC638, 0x00C2, 0x21E6, 0x1164,
 0x1985, 0x1944, 0x10E3, 0x1944, 0x2185, 0x21A5, 0x1964, 0xC5F7, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xB5B6, 0x1103,
 0x21A6, 0x21A6, 0x21C6, 0x21C6, 0x21C6, 0x21C6, 0x21C6, 0x21E7, 0x1144, 0xB596, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xB596, 0x10E3, 0x21A6, 0x21E6, 0x2A27, 0x2A68, 0x2A88, 0x2AC9, 0x2AE9, 0x2AC9, 0x19E6, 0x83F0, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xAD55, 0x2309, 0x33AB, 0x334A, 0x2AE9, 0x2AC9, 0x2AA9, 0x2AA9, 0x2A88, 0x2AA9, 0x22C9, 0x738E, 0xFFFF, 0xFFDF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x8C31, 0x1062, 0x21C7, 0x2165, 0x20E3, 0x2144, 0x2164, 0x21A5, 0x2A26, 0x2A67, 0x21E6, 0x7B8E,
 0xE73C, 0x0000, 0xC5F7, 0xFFFF, 0xFFFF, 0xFFDF, 0x39C7, 0x2EDB, 0x36BB, 0x36BB, 0x36BB, 0x2E7A, 0x2DD7, 0x2D76, 0x2D14, 0x2CD3,
 0x24D3, 0x7B8E, 0x9CB2, 0x1B4D, 0x1208, 0x1AAB, 0x326A, 0x126A, 0x2D96, 0x2E59, 0x2E39, 0x2E39, 0x2E39, 0x2E39, 0x2E59, 0x2E59,
 0x2E59, 0x2E7A, 0x25D7, 0x734D, 0x62CB, 0x26BB, 0x1AAA, 0x26BB, 0x26BB, 0x2EFC, 0x2E7A, 0x2E59, 0x2E59, 0x2E59, 0x2E39, 0x2E39,
 0x2E39, 0x2E39, 0x2E39, 0x2E59, 0x24D3, 0x7BAE, 0xBDB6, 0x0082, 0x4208, 0x738E, 0x5ACB, 0x1A08, 0x2DB7, 0x2D55, 0x2CF4, 0x2C72,
 0x2E18, 0x2E39, 0x2E39, 0x2E39, 0x2E39, 0x2E7A, 0x1BAF, 0xA4F3, 0xFFFF, 0xFFBE, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x41E7, 0x24F3,
 0x2DB7, 0x22EC, 0x2E18, 0x2E39, 0x2E39, 0x2E39, 0x2E39, 0x2E7A, 0x1C31, 0xB575, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xDE9A, 0x12EC, 0x2EBB, 0x2E7A, 0x2E39, 0x2E39, 0x2E39, 0x2E39, 0x2E39, 0x2E7A, 0x1CD3, 0xACF4, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0x5A8A, 0x25D7, 0x2E59, 0x2E39, 0x2E39, 0x2E39, 0x2E39, 0x2E59, 0x2EDB, 0x0904, 0xFFBE, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFBE, 0x1965, 0x2659, 0x2E9A, 0x2E59, 0x2E59, 0x2E9A, 0x2E59, 0x0965, 0x9471, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xF75D, 0x39A7, 0x12CB, 0x2514, 0x24D3, 0x1B4D, 0x0821, 0x8C10,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xBDB6, 0x83AE, 0x7B4D, 0xA4B3,
 0xF79E, 0xFFFF, 0xFFFF, 0xFFFF,
};


const unsigned short gplatform[] = {
 0xFFFF, 0xF73D, 0x94B2, 0x8532, 0x6C6F, 0x9513, 0x6C2E, 0x2B08, 0x644E, 0x64AF, 0x43EB, 0x646F, 0x74D0, 0x84F1, 0xBDF7, 0xA574,
 0x9533, 0xBDB7, 0xE6FC, 0xFFFF, 0x94B2, 0x3C4B, 0x45AE, 0x3DAE, 0x45CF, 0x3DCE, 0x45CE, 0x5E51, 0x4E30, 0x4DEF, 0x5610, 0x5E51,
 0x5E72, 0x4630, 0x5651, 0x3D6D, 0x354C, 0x358D, 0x5D50, 0xAD35, 0x2AE8, 0x5670, 0x5651, 0x456E, 0x3D4D, 0x5610, 0x45EF, 0x3D8E,
 0x350C, 0x352C, 0x3D4D, 0x354D, 0x352C, 0x354D, 0x354D, 0x3D6E, 0x352C, 0x3DCE, 0x56D1, 0x740F, 0x438A, 0x2D8D, 0x3D8D, 0x5610,
 0x86B4, 0x35CE, 0x358D, 0x358D, 0x356D, 0x3D6E, 0x3DAE, 0x458E, 0x3D8E, 0x3D8E, 0x356D, 0x358D, 0x45AF, 0x2D0C, 0x2348, 0x7C90,
 0xB596, 0x540D, 0x438A, 0x542D, 0x542D, 0x74B0, 0x8512, 0x8532, 0x8D32, 0x9553, 0x6C8F, 0x6CAF, 0x646E, 0x3349, 0x6CB0, 0x9D54,
 0xD639, 0xDE7A, 0xEFBE, 0xEFFE,
};


const unsigned short tntarray[] = {
 0x225B, 0x19F7, 0x19B3, 0x19B4, 0x225C, 0x19F7, 0x1192, 0x1A17, 0x223A, 0x19D6, 0x1992, 0x2239, 0x1A39, 0x19D4, 0x19B3, 0x223A,
 0x1A18, 0x19B3, 0x19B4, 0x225B, 0x19F7, 0x19B3, 0x19F6, 0x225B, 0x19F6, 0x1991, 0x1A3A, 0x1A39, 0x19D5, 0x19B2, 0x1A3B, 0x11D7,
 0x1193, 0x1194, 0x1A3C, 0x11D7, 0x0972, 0x19F8, 0x1A1A, 0x11B6, 0x1172, 0x1A1A, 0x11F9, 0x1194, 0x1193, 0x1A1A, 0x19F9, 0x1193,
 0x11B4, 0x1A3B, 0x11D7, 0x1193, 0x11D6, 0x1A3B, 0x11D6, 0x1171, 0x1A1A, 0x19F9, 0x11B5, 0x1172, 0x0138, 0x00D4, 0x008F, 0x0070,
 0x0118, 0x0092, 0x002D, 0x00B3, 0x0116, 0x0092, 0x004E, 0x0116, 0x00B5, 0x0090, 0x006F, 0x00F6, 0x00B4, 0x0090, 0x0070, 0x00F7,
 0x00D3, 0x006F, 0x0092, 0x00F7, 0x00B2, 0x002D, 0x00D5, 0x00F5, 0x00B1, 0x002D, 0xA535, 0x9CD4, 0xA535, 0xB5B7, 0xA535, 0xCE7A,
 0xC639, 0xAD76, 0x9CF4, 0xBDD8, 0xCE39, 0x9D15, 0xC65A, 0xC618, 0x9D14, 0xAD76, 0xDF1D, 0x9493, 0xB5B7, 0xCE9B, 0xA535, 0x9CF4,
 0xAD76, 0xB5B7, 0x9CF4, 0xC5F8, 0xC619, 0xA535, 0x9D14, 0xC639, 0xB595, 0xD69A, 0xD699, 0xD6BA, 0xCE58, 0xAD55, 0xC617, 0xDEBA,
 0xBDF7, 0xB595, 0x39A6, 0x9CF3, 0xDEDA, 0x0020, 0xCE58, 0xB5B6, 0x1081, 0xFFDE, 0x9492, 0x39C6, 0xB595, 0xC617, 0xD6BA, 0xC5F7,
 0xAD75, 0xB595, 0xCE79, 0xD699, 0xB5B6, 0xB595, 0xCE59, 0xCE79, 0xCE79, 0xCE79, 0xCE79, 0xC638, 0xCE59, 0xCE79, 0xCE79, 0xD69A,
 0x39C7, 0x9CD3, 0xFFDF, 0x0000, 0x9492, 0x39C7, 0x0000, 0xFFFF, 0x9CD3, 0x4208, 0xD69A, 0xCE79, 0xCE79, 0xCE59, 0xCE59, 0xCE59,
 0xCE79, 0xCE79, 0xCE59, 0xCE59, 0xCE79, 0xCE79, 0xCE79, 0xCE79, 0xCE79, 0xCE79, 0xCE79, 0xCE79, 0xD6BA, 0xC618, 0x3186, 0x7BCF,
 0xFFFF, 0x0000, 0x39E7, 0x8430, 0x0000, 0xFFDF, 0x7BCF, 0x39C7, 0xC638, 0xD69A, 0xCE79, 0xCE79, 0xCE79, 0xCE79, 0xCE79, 0xCE79,
 0xCE79, 0xCE79, 0xD679, 0xD69A, 0xDEFB, 0xDEDB, 0xCE79, 0xD6BA, 0xDEDA, 0xCE79, 0xEF5C, 0x5289, 0x0000, 0x0000, 0xF79D, 0x0000,
 0xC5F7, 0xC638, 0x0861, 0xE71C, 0x0000, 0x0000, 0x5AEB, 0xE73C, 0xD6BA, 0xD6BA, 0xCE79, 0xD699, 0xD699, 0xDEDA, 0xD69A, 0xD699,
 0xC639, 0xD6BB, 0xCE7A, 0xC618, 0xCE5A, 0xD69A, 0xC618, 0xCE7A, 0xD6BB, 0xEF7E, 0xF7BF, 0xFFFF, 0xD6DC, 0xFFDF, 0xDEDB, 0xCE9B,
 0xF7BF, 0xD6DB, 0xEF7E, 0xF7DF, 0xEF7E, 0xCE5A, 0xCE5A, 0xD6BB, 0xD6BB, 0xC639, 0xD69B, 0xD69B, 0xC659, 0xD6BB, 0x015B, 0x00D6,
 0x0072, 0x0092, 0x015C, 0x00D6, 0x0070, 0x00F6, 0x0119, 0x0094, 0x0050, 0x00F9, 0x00F8, 0x0072, 0x0072, 0x0119, 0x00F7, 0x0072,
 0x0092, 0x013B, 0x00B6, 0x0071, 0x00D5, 0x013A, 0x00B4, 0x004F, 0x0119, 0x00F8, 0x00B4, 0x0070, 0x1A3B, 0x11D7, 0x1193, 0x1193,
 0x1A3C, 0x11D7, 0x0971, 0x11D7, 0x1A1A, 0x11B5, 0x1172, 0x19F9, 0x11F9, 0x1194, 0x1193, 0x1A1A, 0x11F8, 0x1193, 0x1194, 0x1A1B,
 0x11D7, 0x1172, 0x11B6, 0x1A1B, 0x11B5, 0x1151, 0x1A1A, 0x19F9, 0x11B5, 0x1172, 0x227B, 0x1A17, 0x19D3, 0x19D4, 0x225B, 0x1A17,
 0x19B2, 0x2217, 0x225A, 0x19F5, 0x19B2, 0x2239, 0x2239, 0x19D4, 0x19D3, 0x225A, 0x2238, 0x19D3, 0x19D4, 0x225B, 0x2217, 0x19D3,
 0x19F6, 0x225B, 0x19F6, 0x1991, 0x223A, 0x2239, 0x19F5, 0x19B2,
};



const unsigned short explosion1[] = {
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xAD5A, 0x94BB, 0x9CDE, 0x9CDD, 0x94BC, 0x94DB, 0x9CDA, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0x2132, 0x0013, 0x001B, 0x0017, 0x0012, 0x0011, 0x0011, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0x9C7B, 0x4238, 0x0057, 0x00B9, 0x13DF, 0x123D, 0x0017, 0x001A, 0x005B, 0x4238, 0x8438, 0xFFFF, 0xFFFF, 0xF7DF, 0xFFDF, 0x6AFB,
 0x0010, 0x0056, 0x0137, 0x359F, 0x237C, 0x0075, 0x00BA, 0x009C, 0x0013, 0x4A37, 0xFFFF, 0xFFFF, 0xC63C, 0x2112, 0x0853, 0x0012,
 0x853F, 0x969F, 0x877F, 0x96FF, 0x967F, 0x4CDF, 0x23DF, 0x0058, 0x1076, 0x1911, 0xB59B, 0xBDDC, 0x0011, 0x00B5, 0x00F3, 0x865F,
 0xAFDF, 0xAFDF, 0xAFBF, 0xAFFF, 0x5E3F, 0x2D7F, 0x0139, 0x0098, 0x0010, 0xA51B, 0xBDDD, 0x0012, 0x12FB, 0x253F, 0x56FF, 0x777F,
 0xAFDF, 0xAFDF, 0xA7BF, 0xA7DF, 0x8FBF, 0x2D5F, 0x239D, 0x000F, 0xA51C, 0xBDDD, 0x0013, 0x09BA, 0x0B5D, 0x2DDF, 0x3EBE, 0x7F9F,
 0x9FBF, 0xAFDF, 0xB7FF, 0xAF9F, 0x1B7B, 0x0A1C, 0x0014, 0xA51D, 0xBDDC, 0x0011, 0x0017, 0x0058, 0x13FF, 0x15BD, 0x575F, 0x7F9F,
 0x9FFF, 0x9FFF, 0xA77F, 0x0057, 0x001C, 0x081A, 0xAD1E, 0xEF5E, 0x94B9, 0x31DB, 0x0039, 0x1C1F, 0x0D7F, 0x25FF, 0x361F, 0x3E1F,
 0x465F, 0x4DFF, 0x0039, 0x001B, 0x0016, 0xACFC, 0xFFFF, 0xFFFF, 0x637D, 0x0059, 0x1C1F, 0x053F, 0x1CFF, 0x1CFF, 0x1CDF, 0x1CFF,
 0x24FF, 0x0039, 0x0017, 0x000F, 0xA4FB, 0xFFFF, 0xFFFF, 0x5AFA, 0x0012, 0x141F, 0x0CDF, 0x0119, 0x011A, 0x013A, 0x015B, 0x017C,
 0x0015, 0x39F8, 0xD69F, 0xEF5F, 0xFFFF, 0xFFFF, 0x73B9, 0x00B0, 0x241D, 0x241F, 0x001A, 0x001A, 0x001A, 0x005B, 0x001B, 0x0854,
 0x5AF5, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFDF, 0xFFFF, 0xF7DF, 0x1112, 0x0014, 0x003D, 0x0018, 0x0013, 0x0012, 0x0013, 0xF7BF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x6BB5, 0x5AB7, 0x6B3C, 0x62F9, 0x5AD6, 0x5AD5, 0x6315, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF,
};

const unsigned short explosion2[] = {
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xF79E, 0x8C59, 0x0852, 0x1074, 0x1055, 0x0015, 0x7BD9, 0xEF5E,
 0xF7BE, 0xFFFF, 0xE71D, 0xE71E, 0xE73E, 0xE6FE, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xD6BD, 0x0012, 0x0012, 0x0017, 0x021F, 0x01FF, 0x1A5F, 0x0018, 0x0014, 0x2955, 0xAD5C,
 0x0015, 0x0015, 0x0016, 0x0011, 0x7BD9, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0x6337, 0x0015, 0x097B, 0x037D, 0x25DF, 0x571F, 0x4F5F, 0x019C, 0x0018, 0x001B, 0x001A, 0x2BDE, 0x8DBE,
 0x001F, 0x0018, 0x0010, 0x9CDB, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0x7B98, 0x001D, 0x025F, 0x6FBF, 0x9FDF, 0xB7DF, 0x7FBF, 0x02DF, 0x001E, 0x001D, 0x0014, 0x2E1F, 0x77FF, 0x4D9F, 0x001D,
 0xAD7F, 0x0011, 0xC5FB, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xEF7E, 0xB5BE, 0x0011, 0x0015, 0x2137, 0x6318,
 0x003D, 0x13FF, 0x7F3F, 0x05BF, 0x01BE, 0x007D, 0x0A5D, 0x001F, 0x001A, 0x0012, 0x1155, 0x22BC, 0x0019, 0x0015, 0x0017, 0x0017,
 0x83FB, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFF9F, 0x3194, 0x0012, 0x001B, 0x09BF, 0x001E, 0x0015, 0x0019, 0x0019,
 0x22D9, 0x0AFA, 0x00FA, 0x0019, 0x0013, 0x0018, 0x0019, 0x099A, 0x09BA, 0x0019, 0x0014, 0x0019, 0x001F, 0x001F, 0x0019, 0x7BB8,
 0xCE5C, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xDEDF, 0x0011, 0x005A, 0x0BFF, 0x363F, 0x131F, 0x0018, 0x0012, 0x0012, 0x0013, 0x0014,
 0x0012, 0x0014, 0x0013, 0x137C, 0x24FF, 0x4F7F, 0x461E, 0x0016, 0x0016, 0x001E, 0x001E, 0x145F, 0x015F, 0x001A, 0x8C59, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xE6FF, 0x0013, 0x003D, 0x369F, 0x97FF, 0x6E3E, 0x0A9E, 0x1CFF, 0x0AFF, 0x0018, 0x081C, 0x0016, 0x0014,
 0x0018, 0x009D, 0x007D, 0x007E, 0x0033, 0x0014, 0x0017, 0x001D, 0x147F, 0x05FF, 0x021E, 0x001F, 0x0017, 0xE71D, 0xFFFF, 0xFFFF,
 0xFFFF, 0xE73F, 0x0015, 0x003F, 0x139D, 0x04DF, 0x0BDF, 0x09BB, 0x0017, 0x13FF, 0x0B3F, 0x093F, 0x081F, 0x0015, 0x0014, 0x0017,
 0x0017, 0x001A, 0x0015, 0x001D, 0x001E, 0x1B9B, 0x579F, 0x573F, 0x0D7F, 0x017F, 0x0017, 0xF77E, 0xFFFF, 0xFFFF, 0xFFFF, 0x6338,
 0x0012, 0x0017, 0x0015, 0x0979, 0x0017, 0x0012, 0x003E, 0x0A5F, 0x02BE, 0x13FE, 0x001F, 0x0015, 0x0017, 0x001F, 0x001F, 0x001B,
 0x0014, 0x001D, 0x00BE, 0x2EDF, 0x8FBF, 0xAFFF, 0x4F1F, 0x045F, 0x0017, 0x52D7, 0xB59B, 0xFFFF, 0x8C5A, 0x0015, 0x0019, 0x0014,
 0x0013, 0x0014, 0x0014, 0x001A, 0x001F, 0x09FF, 0x0136, 0x153F, 0x095F, 0x0014, 0x0019, 0x003F, 0x001E, 0x003E, 0x001A, 0x001A,
 0x009F, 0x0D5F, 0x571F, 0xB7FF, 0x77BF, 0x3DDF, 0x0018, 0x001C, 0x0019, 0xDEDD, 0x0011, 0x011D, 0x093E, 0x015E, 0x0014, 0x001C,
 0x011E, 0x00BE, 0x047F, 0x3E9F, 0x67BF, 0x0BBE, 0x001E, 0x0014, 0x0019, 0x137F, 0x2E3F, 0x5F1F, 0x001E, 0x001D, 0x00FD, 0x0AFE,
 0x0B1D, 0x4F9F, 0x269E, 0x137D, 0x0013, 0x001E, 0x001A, 0xA53A, 0x0015, 0x1DBF, 0x4FBF, 0x0BBE, 0x09B9, 0x001C, 0x0DBF, 0x46DF,
 0x5EBE, 0xA7FF, 0x46FF, 0x03BE, 0x0014, 0x0013, 0x0019, 0x01DE, 0x3E7F, 0x46DF, 0x01FF, 0x0018, 0x0099, 0x135F, 0x007F, 0x0ADF,
 0x2BFF, 0x001C, 0x0016, 0x003E, 0x099A, 0x0010, 0x0015, 0x155F, 0x7FFF, 0x2C3F, 0x00DA, 0x0A5B, 0x261F, 0x9FFF, 0x4E9E, 0x97FF,
 0x7F5F, 0x0B9E, 0x001A, 0x001C, 0x001D, 0x047F, 0x0D5E, 0x879F, 0x097E, 0x0019, 0x0014, 0x08D7, 0x0078, 0x0017, 0x0018, 0x0016,
 0x0019, 0x0B7F, 0x02FD, 0x945C, 0x0018, 0x119D, 0xA7FF, 0x1DBF, 0x001E, 0x009C, 0x1D1F, 0x12DD, 0x00BD, 0x365F, 0x77BF, 0x00DC,
 0x005F, 0x001F, 0x001F, 0x0CBE, 0x9FFF, 0x779F, 0x001E, 0x0017, 0x0016, 0x001E, 0x0015, 0x0013, 0x0013, 0x0017, 0x025E, 0x579F,
 0x2C3F, 0x20D6, 0x739C, 0x003E, 0x96BF, 0x4F7F, 0x0A7D, 0x0018, 0x0017, 0x0015, 0x0019, 0x011A, 0x6EDF, 0x673F, 0x05BF, 0x0A5D,
 0x2E3F, 0x775F, 0xC7FF, 0x44DF, 0x001C, 0x0015, 0x001E, 0x001F, 0x0019, 0x0013, 0x0017, 0x001F, 0x44FE, 0xA7FF, 0x1BFD, 0x0814,
 0xC63C, 0x001A, 0x00DF, 0x029F, 0x001A, 0x001A, 0x001B, 0x0019, 0x0014, 0x0019, 0x01B8, 0x027A, 0x025E, 0x3F1F, 0x87FF, 0xC7FF,
 0xB7FF, 0x21FE, 0x001C, 0x001A, 0x007F, 0x099E, 0x001F, 0x0017, 0x001B, 0x137F, 0x8FDF, 0x87FF, 0x031A, 0x0832, 0xFFFF, 0x0052,
 0x0017, 0x0016, 0x0018, 0x02FE, 0x0C7E, 0x0A3E, 0x0014, 0x0036, 0x001D, 0x001A, 0x001A, 0x1A3E, 0x1DFF, 0x575F, 0x261F, 0x0999,
 0x0014, 0x001B, 0x00DE, 0x0D7F, 0x00DF, 0x001B, 0x001A, 0x157F, 0x261F, 0x255F, 0x005A, 0x0831, 0xFFFF, 0xDEFF, 0x0013, 0x0017,
 0x001D, 0x0C5F, 0x0CBF, 0x0018, 0x0014, 0x003A, 0x001D, 0x001F, 0x0019, 0x001E, 0x025F, 0x147F, 0x001F, 0x0017, 0x0014, 0x001C,
 0x049F, 0x36BF, 0x45DF, 0x001A, 0x0014, 0x005B, 0x003C, 0x001B, 0x0013, 0xCE7D, 0xFFFF, 0x8C7A, 0x0018, 0x001F, 0x133F, 0x4F9F,
 0x65BE, 0x00BB, 0x0079, 0x001F, 0x015F, 0x01FF, 0x0A1F, 0x001F, 0x001F, 0x001F, 0x001E, 0x0015, 0x001A, 0x00DF, 0x363F, 0x97FF,
 0x9FFF, 0x0019, 0x0013, 0x0017, 0x0012, 0x5AB8, 0xA55B, 0xFFFF, 0xFFFF, 0x0014, 0x017D, 0x039E, 0x5F5F, 0x9FFF, 0x66DF, 0x02BC,
 0x0039, 0x091E, 0x2E5E, 0x371F, 0x163F, 0x0ABF, 0x001B, 0x0018, 0x0017, 0x0014, 0x001F, 0x035F, 0x57BF, 0x3E7F, 0x2DFF, 0x001A,
 0x0013, 0x001E, 0x001A, 0x6B79, 0xFFFF, 0xFFFF, 0xFFFF, 0x0815, 0x0A5F, 0x15BF, 0x8FDF, 0x5F9F, 0x45FD, 0x0017, 0x001D, 0x021F,
 0x7FBF, 0xAFFF, 0x677F, 0x3DFF, 0x0018, 0x0013, 0x0015, 0x0015, 0x0017, 0x005D, 0x147F, 0x007D, 0x009E, 0x001B, 0x0014, 0x015D,
 0x0A9F, 0x0815, 0xFFFF, 0xFFFF, 0xFFFF, 0x0014, 0x001D, 0x047F, 0x1E5F, 0x163F, 0x133D, 0x0013, 0x001E, 0x2B3F, 0x4F7F, 0xB7FF,
 0x87DF, 0x163F, 0x02BB, 0x0013, 0x0017, 0x001F, 0x0016, 0x001A, 0x001D, 0x0019, 0x0014, 0x0016, 0x00DB, 0x2DFF, 0x87FF, 0x1975,
 0xFFFF, 0xFFFF, 0xFFFF, 0x6B57, 0x0017, 0x0A1C, 0x0ADF, 0x0ADF, 0x0018, 0x0012, 0x0019, 0x197F, 0x363E, 0x5F7F, 0x4E9F, 0x349E,
 0x0B1F, 0x0016, 0x093B, 0x0AFF, 0x001F, 0x001C, 0x0013, 0x0013, 0x0014, 0x001C, 0x03DF, 0x87FF, 0x7DFC, 0x1093, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0x5298, 0x0013, 0x0017, 0x0018, 0x0015, 0x125C, 0x009B, 0x0017, 0x11FB, 0x473F, 0x057F, 0x005E, 0x00FF, 0x0018,
 0x009E, 0x0CBF, 0x351E, 0x13BF, 0x005C, 0x001C, 0x0015, 0x0017, 0x0BDF, 0x369F, 0x01B7, 0x9CBA, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xE73F, 0x0852, 0x1893, 0x00D6, 0x5F7F, 0x451F, 0x0012, 0x0014, 0x0077, 0x009D, 0x001C, 0x0019, 0x0017, 0x001A, 0x039E,
 0x77FF, 0x56DE, 0x145F, 0x001F, 0x1096, 0x0016, 0x001E, 0x001A, 0x8479, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0x0096, 0x2DBF, 0x6F3F, 0x0094, 0x0013, 0x0018, 0x0015, 0x0013, 0x0013, 0x001D, 0x007E, 0x1CFE, 0xB7FF, 0xAFFF,
 0x463F, 0x0015, 0xCE7D, 0x4215, 0x4A15, 0x6B57, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0x0013, 0x00FC, 0x02FF, 0x153F, 0x133C, 0x001F, 0x0016, 0x6359, 0x0011, 0x001D, 0x009F, 0x25BF, 0x5EFF, 0x3CDE, 0x013C, 0x2114,
 0xF79E, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x9CFB, 0x0011,
 0x0014, 0x00D5, 0x0135, 0x0013, 0x7BF9, 0xFFFF, 0xDEDE, 0x18F4, 0x0017, 0x007E, 0x00DE, 0x0016, 0xBD9D, 0xEF7F, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xEF9F, 0x18B3,
 0xDE9D, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x6318, 0x5AD8, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
};



const unsigned short explosion3[] = {
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x635A, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xE71B, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xDEBF, 0xFFFF, 0x94BB, 0x007B,
 0x4A1B, 0xF7BD, 0xF79E, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xEF3F, 0x739D, 0x843C, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x8C5A, 0x0AFE, 0xC69F, 0xEF5F,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0x0019, 0x8C3D, 0x39B7, 0xF79F, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x213A, 0x10D8, 0x8C7A, 0xFFFF, 0xEF7F,
 0xCE7E, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0x4A7A, 0x213A, 0x739B, 0xFFFF, 0xFFFF, 0x94DB, 0xFFFF, 0xFFFF, 0x8C7B, 0xFFFF, 0xFFFF, 0xFFFF, 0xDEDE, 0x9CDD, 0xFFFF,
 0x8C7C, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xD6DE, 0x8439, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xF7BF,
 0x945B, 0xEF5F, 0xFFFF, 0xFFFF, 0x18B6, 0xF79F, 0xEF7D, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xA51C, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFDF, 0x4A59, 0xDEFF, 0xE71C, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xCE5E, 0xFFFF, 0xFFDF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x4A59, 0x0019, 0x0038, 0xA559, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0x421A, 0x31B8, 0xFFFF, 0xFFFF, 0xBDBB, 0x5AD8, 0xFFBF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xCE7E, 0x7BBA, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xD6BE, 0xF77F, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xF7DF, 0xFFFF, 0xA57C, 0xC5FF, 0x4B3C, 0xADFC, 0xFFFF, 0xFFFF, 0xFFFF, 0xEF9F, 0xD69E, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xA51D, 0x735B, 0xFFFF, 0xFFFF, 0xFFFF, 0xEF7D, 0xFFFE, 0xFFFF,
 0xE73C, 0xFFFF, 0x7BDB, 0x399C, 0x0A1C, 0xDFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xDF1E, 0x5298, 0xD6BD, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xEF9D, 0xDF1B, 0xFFFF, 0xFFFF, 0xA51B, 0xFFDF, 0xFFFF, 0xEF7D, 0xBDFC, 0x39FB, 0xD6BF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xD6BC, 0xB57B, 0xFFFF, 0xFFFF, 0xA55C, 0xC63E, 0xFFFF, 0xCE7D, 0xC65D, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xF7BF, 0xEF3C, 0xE7BF, 0x635A, 0x9CBC, 0xC63E, 0xFFFF, 0xFFFF, 0xDF1C, 0x39FA, 0x9CDE, 0xEF5E, 0xFFFF, 0xFFFF, 0xFFFF, 0xF7BE,
 0xFFFF, 0xDEFB, 0xFFFF, 0xDEDE, 0xCE3C, 0xFFFF, 0xF79D, 0xF7DE, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x7C3A,
 0x23FD, 0x1957, 0xE71E, 0xF7BF, 0xFFFF, 0xFFFF, 0xDF1B, 0x949C, 0x6317, 0xFFFE, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFDF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFDF, 0xFFFF, 0xF7BF, 0xEF3F, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x7DDF, 0x85BF, 0xFFFF,
 0xFFDF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xDEDA, 0xEF7E, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xE6FB, 0xFFFF, 0xFFDE, 0xFFFF, 0xAD7D, 0x4A79, 0xDF1A, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xA51C, 0x39D8, 0xF79F, 0xCE79, 0xF7BE,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xCE1E, 0xDEFE, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xAF1E,
 0xEF7D, 0xFFFF, 0xD69D, 0xA51C, 0xEF7C, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFDF, 0xF79E, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xB57D, 0xCE7E, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xBDDD, 0x52DA, 0x22FB, 0xC61D, 0xD67E,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xDEDF, 0x297A, 0xBDBC, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x9CBD, 0xC61D, 0xFFFF, 0xDEDF, 0x1058, 0x947B, 0xBE1C, 0xE71F, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0x4237, 0xF7BF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x529A, 0x8C9A, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xEF3F, 0xF79F, 0x4219, 0xFFFF, 0xEF5E, 0xDEBA, 0xE73C, 0xFFFF, 0xFFFF, 0xFFFF, 0xE71B, 0xFFFF,
 0xFFFF, 0xF79F, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xF7DE, 0xD6BB, 0xBE1D, 0x3A19, 0xFFFF, 0xFFFF, 0xF79E, 0xC658,
 0xF7BD, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xEF5F, 0xC65E, 0xBDFE, 0xF7DF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xCE7E, 0xF79F, 0xF7BF, 0xCE7E, 0xFFFF, 0xFFFF, 0xFFDE, 0x52BA, 0xFFFF, 0xFFFF, 0xFFFF, 0xD699, 0xEF7C, 0xA53A, 0xFFDF,
 0xFFFF, 0xFFFF, 0xAD3D, 0xCE7E, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xDEDE, 0x9CFB, 0x8C7B, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xAD7D,
 0x6B7B, 0x5ADC, 0x62FB, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xDEFB, 0xDEBF, 0x0017, 0xF79F, 0xFFFF, 0xFFFF,
 0x52B9, 0x9D3C, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xB59C, 0x423A, 0x6B79, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFE, 0x9CBD, 0x089C,
 0x7BBE, 0xBDDC, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFE, 0x735B, 0x421A, 0xFFFF, 0xFFFF, 0xFFFF, 0xF7DD, 0xF79D,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFDE, 0xCE7C, 0xAD5C, 0xCE7E, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x5298, 0xBDFF, 0xEF7F, 0xCE5C,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xE73E, 0xF79E, 0xFFFF, 0xFFFF, 0xE71D, 0x4216, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xCE7E, 0x1097, 0x8C3A, 0xEF5C, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xD6BB, 0xE75F, 0xD75D, 0xEF9E, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xE73C, 0xFFBF, 0xEF3E, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFD, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xE71C, 0xD79F, 0x6D9A, 0xF7BE, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xE75F, 0x7BDB, 0x7BBB,
 0xFFDF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xE6FB, 0xF7BE, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x5B39, 0xA55B, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xDF1E, 0x5AD9, 0x631A, 0xFFDF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xF7BF, 0x18BA, 0xE73F, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xDEFB, 0xFFFE, 0xFFFE, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x843B,
 0x0017, 0x9CBF, 0x7BD8, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFDF, 0xFFFF, 0xFFFF, 0xD6BB, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0x529B, 0x4A59,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
};




struct blast{
	int16_t x;
	int16_t y;
	int16_t w;
	int16_t h;
	int16_t flag;
	int16_t count;
	
};

typedef struct blast explode;
explode tnt={49,0,30,12,0,0};
explode first={56,0,15,15,0,0};
explode second={49,0,30,30,0,0};
explode third={49,0,30,30,0,0};

void Delay100ms(uint32_t count){uint32_t volatile time;
  while(count>0){
    time = 727240;  // 0.1sec at 80 MHz
    while(time){
      time--;
    }
    count--;
  }
}

struct platform{
	int16_t x;
	int16_t x2;
	int16_t y;
	int spring;
	
};

typedef struct platform p_plat;

p_plat platheight[16] = {{1,0,160,0},{1,0,150,0},{1,0,140,0},{1,0,130,0},{1,0,120,0},{1,0,110,0},{1,0,100,0},{1,0,90,0},{1,0,80,0},{1,0,70,0},{1,0,60,0},{1,0,50,0},{1,0,40,0},{1,0,30,0},{1,0,20,0},{1,0,10,0}};


const int8_t SinWave[34] = {0,-3,-3,-3,-3,-3,-3,-2,-3,-2,-2,-2,-1,-2,-1,-1,-1,0,1,1,1,2,1,2,2,2,3,2,3,3,3,3,3,3};
struct Person{
	int16_t x;
	int16_t y;
	int16_t dx;
	int16_t dy;
	int16_t width;
	int16_t length;
	const uint16_t *rimage;
	const uint16_t *limage;
	const uint16_t *shoot;
	int flag;
	int16_t xold;
	int16_t yold;
	int count;
};

typedef struct Person p_type;

p_type doodle = {50,100, 5,5 ,18,18, doodleright, doodleleft, doodleshot, 0, 50,100, 0};
p_type bullet= {0,0,0,10,4,4,shot, shot,shot, 0,0,0,0};

void move(){
	data= ADC_In();
	data *= 268;
	data/= 10000;
	doodle.xold= doodle.x;
	doodle.yold= doodle.y;
	doodle.x = data;
	if(jumpcount>0){
		doodle.y -=5;
		jumpcount--;
		moveheight+= 5;
		doodle.count=0;
		score+=5;
	}
	else{
		doodle.y += SinWave[doodle.count];
		if(doodle.y>160){
			gameend=1;
		}
		if(doodle.count==33){
		}
		else{
			doodle.count++;
		}

	}
	doodle.flag=1;
}
void Timer1A_Handler(void){ // can be used to perform tasks in background
  TIMER1_ICR_R = TIMER_ICR_TATOCINT;// acknowledge TIMER1A timeout
	if(times!=0){
		times--;
	}
	if(stop==0){	
		move();

   // execute user task
	}
}



void drawdoodler(){
	if(bullet.flag==1){
		ST7735_DrawBitmap(bullet.x,bullet.y, bullet.limage, 4,4);
		bullet.yold = bullet.y;
		bullet.y-= bullet.dy;
		
		
	}
	if(moveheight>0){
		doodle.y +=5;
		bullet.y += 5;
		moveheight -=5;
		
	}
	if(upface != 0){
		ST7735_DrawBitmap(doodle.x	,doodle.y, doodle.shoot, doodle.width,doodle.length);
		upface--;
	}
	else if(doodle.x>doodle.xold){
			ST7735_DrawBitmap(doodle.x	,doodle.y, doodle.rimage, doodle.width,doodle.length);
			right=1;
	}
	else if(doodle.xold>doodle.x){
			right=0;
			ST7735_DrawBitmap(doodle.x	,doodle.y, doodle.limage, doodle.width,doodle.length);
	}
	else{
			if(right==1){
				ST7735_DrawBitmap(doodle.x	,doodle.y, doodle.rimage, doodle.width,doodle.length);
		}
		else{
				ST7735_DrawBitmap(doodle.x	,doodle.y, doodle.limage, doodle.width,doodle.length);
		}
	
	}
}


void erasedoodler(){
	ST7735_FillRect(doodle.xold, doodle.yold-doodle.length+1, doodle.width, doodle.length, ST7735_WHITE);
}

void displayplatform(int i){
	if(platheight[i].x!=0){
		ST7735_DrawBitmap(platheight[i].x	, platheight[i].y, gplatform , 20,5);

		if(platheight[i].spring==1){
			if(compressed==1){
				ST7735_DrawBitmap(platheight[i].x+7, platheight[i].y-5, compress, 6,4);
			}
			else{
				ST7735_DrawBitmap(platheight[i].x+7, platheight[i].y-5, expand, 6,7);
			}
		}
	}
	if(platheight[i].x2 !=0){
		ST7735_DrawBitmap(platheight[i].x2	, platheight[i].y, gplatform , 20,5);
		
	}
}



void checkjump(){

	if(SinWave[doodle.count]<1){
		return;
	}
	for(int i=0;i<16;i++){
		if((doodle.y== ((platheight[i].y)-5))| (doodle.y== ((platheight[i].y)-4))|(doodle.y== ((platheight[i].y)-3))){
			int x = doodle.x+9;
			int y= platheight[i].x;
			int z= platheight[i].x2;
			int yval = platheight[i].y;
		
			if(y==0){
				return;
			}
			else if(x>y & x<(y+20)){
				doodle.count=0;
				Sound_Jump();
				if(platheight[i].spring==1){
					comflag=1;
				}
				if(yval<120){
					moveheight += (120-yval);
					score += (120-yval);
				}
				return;
				
			}
			if(z==0){
				return;
				
			}
			else if(x>z & x<(z+20)){
				doodle.count=0;
				Sound_Jump();
				if(platheight[i].spring==1){
					comflag=1;
				}
				if(yval<120){
					moveheight += (120-yval);
					score += (120-yval);
				}
				return;
			}
			
		}
		
	}
	
}

void assignplat(int i){
	if(platheight[i].spring==1){
		compressed=1;
		platheight[i].spring =0;
	}
	
	int x = (((Random()>>2)%45)+15)/20;
	int y = ((Random())%100);
	int a = ((Random())%50);
	springcount--;
	if(springcount==0){
		springcount=20;
		platheight[i].spring=1;
	}
	if (x==0){
		platheight[i].x=0;
		platheight[i].x2=0;
		
		
	}
	else if(x==1){
		platheight[i].x=y+3;
		platheight[i].x2=0;
		
		
	}
	else{
		platheight[i].x=a+3;
		platheight[i].x2=a+33;			
		platheight[i].spring=0;
	}
}

void decreementplat(int i){
	platheight[i].y += 5;
	if(platheight[i].y==165){
		platheight[i].y=0;
		assignplat(i);
		explosioncounter--;
		if(explosioncounter==0){
			explosioncounter=20;
			explosionflag=1;
			tnt.flag=1;
		}
		
	}
	
}

void Displayplatforms(){
	if(bullet.flag == 1){
		ST7735_FillRect(bullet.xold, bullet.yold-3,4,4,ST7735_WHITE);
		
	}
	if(bullet.y<0){
		bullet.flag=0;
		
	}
	
	if(moveheight>0){
		for(int i=0; i<16; i++){
			if(platheight[i].x!=0){
				ST7735_FillRect(platheight[i].x, platheight[i].y-5+1, 20, 5 , ST7735_WHITE);
				if(platheight[i].spring ==1){
					if(compressed==1){
						ST7735_FillRect(platheight[i].x+7, platheight[i].y-5+1-4, 6, 4 , ST7735_WHITE);
					}
					else{
						ST7735_FillRect(platheight[i].x+7, platheight[i].y-5+1-7, 6, 7 , ST7735_WHITE);
					}

				}
				
			}
			if(platheight[i].x2!=0){
				ST7735_FillRect(platheight[i].x2, platheight[i].y-5+1, 20, 5 , ST7735_WHITE);
				
			}
			decreementplat(i);
			
		}
		
		
	}
	if(comflag==1){
		compressed=0;
		comflag=0;
		jumpcount=20;
	}
	for (int i=0; i<16;i++){
		displayplatform(i);
			
	}
	
}


void EraseExplosion(){
	if(tnt.y>doodle.y-18){
		gameend=1;
	}
	if(tnt.flag==1){
		ST7735_FillRect(tnt.x, tnt.y-tnt.h+1, tnt.w, tnt.h, ST7735_WHITE);
		tnt.count++;
		if(moveheight>0){
			tnt.y+=5;
				
		}
		if(bullet.y<(tnt.y)){
			first.y = tnt.y;
			tnt.y=0;
			tnt.flag=0;
			tnt.count=0;
			first.flag=1;
		}
	}
	else if(first.flag==1){
		ST7735_FillRect(first.x, first.y-first.h+1, first.w, first.h, ST7735_WHITE);
		first.count++;
		if(moveheight>0){
			first.y+=5;
				
		}
		if(first.count==loop){
			second.y = first.y;			
			first.y=0;
			first.flag=0;
			first.count=0;
			second.flag=1;
			
		}
		
	}
	else if(second.flag==1){
		ST7735_FillRect(second.x, second.y-second.h+1, second.w, second.h, ST7735_WHITE);
		second.count++;
		if(moveheight>0){
			second.y+=5;
				
		}		
		if(second.count==loop){
			third.y = second.y;
			second.y=0;
			second.flag=0;
			second.count=0;
			third.flag=1;
		}
		
	}	
	else if(third.flag==1){
		ST7735_FillRect(third.x, third.y-third.h+1, third.w, third.h, ST7735_WHITE);
		third.count++;
		if(moveheight>0){
			third.y+=5;
				
		}
		if(third.count==loop){
			third.y=0;
			third.flag=0;
			third.count=0;
			explosionflag =0;
		}
		
	}	
	
}
void GPIOPortF_Handler(void){
  GPIO_PORTF_ICR_R = 0x10;      // acknowledge flag4
	if(times!=0){

	}
	else {
		if(gameend==1){
			stop=0;
			gameend=0;
			times=0;
			explosioncounter=20;
			explosionflag=0;
			right=1;
			score=0;
			moveheight=0;
			upface=0;
			doodle.x=50;
			doodle.y=100;
			tnt.y=0;
			clear=1;
			ST7735_FillScreen(0xFFFF);
			ST7735_SetCursor(5,2);
			ST7735_OutString("DOODLE JUMP 2");
			ST7735_SetCursor(5,6);
			ST7735_OutString("Download Now");
			ST7735_DrawBitmap(51,55, jump2, 25,25);
			
			ST7735_SetCursor(3,10);
			ST7735_OutString("Remove all adds");
			ST7735_SetCursor(8,12);
			ST7735_OutString("$2.99");			
			Delay100ms(10);
			ST7735_SetCursor(11,15);
			ST7735_OutString("Ends in 9");
			Delay100ms(10);
			ST7735_SetCursor(11,15);
			ST7735_OutString("Ends in 8");
			Delay100ms(10);
			ST7735_SetCursor(11,15);
			ST7735_OutString("Ends in 7");
			Delay100ms(10);
			ST7735_SetCursor(11,15);
			ST7735_OutString("Ends in 6");
			Delay100ms(10);
			ST7735_SetCursor(11,15);
			ST7735_OutString("Ends in 5");
			Delay100ms(10);
			ST7735_SetCursor(11,15);
			ST7735_OutString("Ends in 4");
			Delay100ms(10);
			ST7735_SetCursor(11,15);
			ST7735_OutString("Ends in 3");
			Delay100ms(10);
			ST7735_SetCursor(11,15);
			ST7735_OutString("Ends in 2");
			Delay100ms(10);
			ST7735_SetCursor(11,15);
			ST7735_OutString("Ends in 1");
			Delay100ms(10);
			ST7735_FillScreen(0xFFFF);
			
			            // set screen to black
//			ST7735_DrawBitmap(doodle.x	,doodle.y, doodle.rimage, doodle.width,doodle.length);
			for(int i=0; i <16; i++){
				assignplat(i);
				displayplatform(i);
			}	
			
		}
		
		else if(stop==1){
			stop=0;
		}
		else{
			stop=1;
		}
		times=10;
	}

}

void DrawExplosion(){
	if(tnt.flag==1){
		ST7735_DrawBitmap(tnt.x ,tnt.y, tntarray, tnt.w,tnt.h );
	}
	else if(first.flag==1){
		ST7735_DrawBitmap(first.x ,first.y, explosion1, first.w,first.h );
	}
	else if(second.flag==1){
		ST7735_DrawBitmap(second.x ,second.y, explosion2, second.w,second.h );
	}
	else if(third.flag==1){
		ST7735_DrawBitmap(third.x ,third.y, explosion3, third.w,third.h );
	}
}
void DisplayScore(){
//	ST7735_FillRect(0,0,128,10, ST7735_WHITE );
	ST7735_SetCursor(6,0);
	ST7735_OutString("Score = ");
	ST7735_OutUDec(score);
}
int main(void){

  DisableInterrupts();
	EdgeCounter_Init();
	Timer1_Init(4000000,6);
  TExaS_Init(NONE);       // Bus clock is 80 MHz
	ADC_Init();
  Output_Init();
	Sound_Init();
	ST7735_InvertDisplay(1); 
  ST7735_FillScreen(ST7735_WHITE);            // set screen to black
	ST7735_SetCursor(6,5);
	ST7735_OutString("DOODLE JUMP");
	ST7735_DrawBitmap(55,80, doodleleft, 18,18);
	
	Delay100ms(20);
	ST7735_FillScreen(ST7735_WHITE);
  ST7735_DrawBitmap(doodle.x	,doodle.y, doodle.rimage, doodle.width,doodle.length);
  Random_Init(NVIC_ST_CURRENT_R);
	for(int i=0; i <16; i++){
		assignplat(i);
		displayplatform(i);
	}
	EnableInterrupts();

  while(1){
		while(doodle.flag==0){}
		if(gameend==1){
			ST7735_FillScreen(ST7735_WHITE);
		}
		int set=0;
		while(gameend==1){
			
			if(GPIO_PORTE_DATA_R &0x01){
				if(set==0){
					ST7735_FillScreen(ST7735_WHITE);
				}			
				ST7735_SetCursor(6,7);
				ST7735_OutString("Play Again");
				ST7735_SetCursor(6, 9);
				ST7735_OutString("Score = ");
				ST7735_OutUDec(score);
				set=1;
			}
			else{	
				if(set==1){
					ST7735_FillScreen(ST7735_WHITE);
				}					
				ST7735_SetCursor(4,7);
				ST7735_OutString("Juega De Nuevo");
				ST7735_SetCursor(5, 9);
				ST7735_OutString("Puntos = ");
				ST7735_OutUDec(score);
				set=0;
			}
			

		}
		if(clear==1){
			clear=0;
			ST7735_FillScreen(ST7735_WHITE);
			
		}
		while(stop==1){
			
		}
		if((GPIO_PORTE_DATA_R &0x01)==1& bullet.flag==0){
			bullet.flag = 1;
			bullet.y = doodle.y - doodle.length;
			bullet.x = doodle.x+6;
			bullet.yold = doodle.y - doodle.length;
			bullet.xold = doodle.x + 6;
			upface = 4;
			Sound_Shoot();
		
		}
		
		if(explosionflag==1){
			EraseExplosion();
			
		}
		checkjump();
		erasedoodler();
		Displayplatforms();
		if(explosionflag==1){
			DrawExplosion();
		}
		drawdoodler();
		doodle.flag=0;
		DisplayScore();
		
		
  }

}

